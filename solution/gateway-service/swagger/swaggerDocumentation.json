{
  "openapi": "3.0.0",
  "info": {
    "title": "Gateway Service API",
    "version": "1.0.0",
    "description": "This is the API documentation for the Gateway Service."
  },
  "servers": [
    {
      "url": "http://localhost:3003",
      "description": "Local server"
    }
  ],
  "paths": {
    "/comment/avgAnswer/id": {
      "get": {
        "summary": "Get average reply time by person ID",
        "description": "Retrieves the average reply time for comments made by a person.",
        "parameters": [
          {
            "name": "personId",
            "in": "query",
            "description": "The ID of the person.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "The average reply time in seconds, followed by the value in days, hours and minutes.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "properties": {
                    "averageReplyTimeSeconds": {
                      "type": "number"
                    },
                    "formatted": {
                      "type": "object",
                      "properties": {
                        "days": {
                          "type": "integer"
                        },
                        "hours": {
                          "type": "integer"
                        },
                        "minutes": {
                          "type": "integer"
                        },
                        "seconds": {
                          "type": "integer"
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "404": {
            "description": "No comments or replies found for the specified user",
            "content": {
              "application/json": {
                "examples": {
                  "NoComments": {
                    "summary": "No comments found",
                    "value": {
                      "message": "No comments found for the specified user ID."
                    }
                  },
                  "NoReplies": {
                    "summary": "No replies found",
                    "value": {
                      "message": "No replies found for the specified user ID."
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An error occurred while loading the average reply time."
          }
        }
      }
    },
    "/person/id": {
      "get": {
        "summary": "Get person by ID",
        "description": "Retrieves person data based on the provided person ID.",
        "parameters": [
          {
            "name": "personId",
            "in": "query",
            "description": "The ID of the person to retrieve.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Returns the first name and last name of the person associated with the specified ID.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/PersonName"
                }
              }
            }
          },
          "404": {
            "description": "No person found for the specified ID."
          },
          "500": {
            "description": "An error occurred while loading person by ID."
          }
        }
      }
    },
    "/person/byLocation/id": {
      "get": {
        "summary": "Get people by location",
        "description": "Retrieves person data for people located in a specific place.",
        "parameters": [
          {
            "name": "placeId",
            "in": "query",
            "description": "The ID of the place to filter people.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "An array of detailed person objects for the specified location.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "$ref": "#/components/schemas/Person"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No content found for the specified user ID or creator not found",
            "content": {
              "application/json": {
                "examples": {
                  "NoContent": {
                    "summary": "No content Found",
                    "value": {
                      "message": "No content found for the specified user ID"
                    }
                  },
                  "CreatorNotFound": {
                    "summary": "Creator not found",
                    "value": {
                      "message": "Creator not found"
                    }
                  }
                }
              }
            }
          },
          "500": {
            "description": "An error occurred while loading person by location."
          }
        }
      }
    },
    "/person/byLocation/{locId}/byTag/{tagId}": {
      "get": {
        "summary": "Get people by location and tag",
        "description": "Retrieves people associated with a specific location and tag.",
        "parameters": [
          {
            "name": "locId",
            "in": "path",
            "description": "The location ID.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          },
          {
            "name": "tagId",
            "in": "path",
            "description": "The tag ID.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A list containing people information, including first name, last name and ID.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "$ref": "#/components/schemas/PersonInfo"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No person found for the specified tag and location."
          },
          "500": {
            "description": "Internal Server Error"
          }
        }
      }
    },
    "/person/known/id": {
      "get": {
        "summary": "Get known people",
        "description": "Retrieves a list of known people for the given person ID.",
        "parameters": [
          {
            "name": "personId",
            "in": "query",
            "description": "The person's ID.",
            "required": true,
            "schema": {
              "type": "integer"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "An array of people known by the user identified by the provided ID. Each object includes the person's first name, last name, and unique identifier.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "object",
                  "$ref": "#/components/schemas/PersonInfo"
                }
              }
            }
          },
          "404": {
            "description": "No known person found for the specified ID."
          },
          "500": {
            "description": "An error occurred while loading person known by ID"
          }
        }
      }
    },
    "/person/fof/id": {
      "get": {
        "summary": "Get friends of friends (FOF)",
        "description": "Retrieves the list of friends-of-friends for the given person ID.",
        "parameters": [
          {
            "name": "personId",
            "in": "query",
            "description": "The ID of the person.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A list of individuals, each providing their first name, last name, and the number of mutual friends shared with the specified person ID.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/PersonFOF"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No friend of friend found for the specified user ID."
          },
          "500": {
            "description": "An error occurred while loading friend of friend by ID."
          }
        }
      }
    },
    "/post/creator/id": {
      "get": {
        "summary": "Get content by creator ID",
        "description": "Retrieves all posts and comments created by a specific person along with enriched data (e.g., forum title or parent post data).",
        "parameters": [
          {
            "name": "id",
            "in": "query",
            "description": "The creator's person ID.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A list of content items created by the specified creator. Each item may be either a comment or a post.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/CreatorContent"
                }
              }
            }
          },
          "404": {
            "description": "No content found for the specified user ID"
          },
          "500": {
            "description": "An error occurred while loading content by user ID."
          }
        }
      }
    },
    "/post/byOrganization/{type}/{orgId}": {
      "get": {
        "summary": "Get content by organization",
        "description": "Retrieves people associated with a specific organization and for each person, fetches their posts since a given date.",
        "parameters": [
          {
            "name": "type",
            "in": "path",
            "description": "The organization type.",
            "required": true,
            "schema": {
              "type": "string",
              "enum": [
                "University",
                "Company"
              ]
            }
          },
          {
            "name": "orgId",
            "in": "path",
            "description": "The organization ID.",
            "required": true,
            "schema": {
              "type": "string"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "A list containing posts from individuals affiliated with the specified organization, either through employment or academic enrollment.",
            "content": {
              "application/json": {
                "schema": {
                  "type": "array",
                  "items": {
                    "$ref": "#/components/schemas/CreatorPostsContent"
                  }
                }
              }
            }
          },
          "404": {
            "description": "No person found for the given organization."
          },
          "500": {
            "description": "An error occurred while loading post by people's oragnization."
          }
        }
      }
    }
  },
  "components": {
    "schemas": {
      "PersonName": {
        "type": "object",
        "properties": {
          "firstName": {
            "type": "string",
            "example": "Hossein"
          },
          "lastName": {
            "type": "string",
            "example": "Forouhar"
          }
        }
      },
      "Person": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 1
          },
          "creationDate": {
            "type": "string",
            "format": "date-time",
            "example": "2020-01-01T12:00:00Z"
          },
          "firstName": {
            "type": "string",
            "example": "John"
          },
          "lastName": {
            "type": "string",
            "example": "Doe"
          },
          "gender": {
            "type": "string",
            "enum": [
              "male",
              "female",
              "other"
            ],
            "example": "male"
          },
          "birthday": {
            "type": "string",
            "format": "date-time",
            "example": "1990-05-15T00:00:00Z"
          },
          "locationIP": {
            "type": "string",
            "example": "192.168.1.1"
          },
          "browserUsed": {
            "type": "string",
            "example": "Chrome"
          },
          "LocationCityId": {
            "type": "integer",
            "example": 100
          },
          "language": {
            "type": "string",
            "example": "en"
          },
          "email": {
            "type": "string",
            "example": "john.doe@example.com"
          }
        }
      },
      "PersonInfo": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 26388279066655
          },
          "name": {
            "type": "string",
            "example": "Otto"
          },
          "surname": {
            "type": "string",
            "example": "Richter"
          }
        }
      },
      "PersonFOF": {
        "type": "object",
        "properties": {
          "id": {
            "type": "integer",
            "example": 26388279066655
          },
          "name": {
            "type": "string",
            "example": "Otto"
          },
          "surname": {
            "type": "string",
            "example": "Richter"
          },
          "mutualFriends": {
            "type": "integer",
            "example": 1
          }
        }
      },
      "CreatorContent": {
        "type": "object",
        "properties": {
          "creator": {
            "type": "object",
            "properties": {
              "firstName": {
                "type": "string",
                "example": "Jan"
              },
              "lastName": {
                "type": "string",
                "example": "Zakrzewski"
              }
            }
          },
          "content": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "contentId": {
                  "type": "number",
                  "example": 1168231107465
                },
                "type": {
                  "type": "string",
                  "example": "Comment"
                },
                "creationDate": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2012-11-19T19:51:30.896Z"
                },
                "content": {
                  "type": "string",
                  "example": "thx"
                },
                "parentPost": {
                  "type": "object",
                  "properties": {
                    "originalId": {
                      "type": "number",
                      "example": 1168231107462
                    },
                    "originalType": {
                      "type": "string",
                      "example": "Post"
                    },
                    "id": {
                      "type": "number",
                      "example": 1168231107462
                    },
                    "content": {
                      "type": "string",
                      "example": "About Hannibal"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "CreatorPostsContent": {
        "type": "object",
        "properties": {
          "id": {
            "type": "number",
            "example": 21990232555527
          },
          "name": {
            "type": "string",
            "example": "Jun"
          },
          "surname": {
            "type": "string",
            "example": "Li"
          },
          "since": {
            "type": "number",
            "example": 2005
          },
          "posts": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "_id": {
                  "type": "string",
                  "example": "681252856b3cb58f077f9900"
                },
                "creationDate": {
                  "type": "string",
                  "format": "date-time",
                  "example": "2012-11-08T17:17:38.086Z"
                },
                "id": {
                  "type": "number",
                  "example": 1099511630536
                },
                "imageFile": {
                  "type": "string",
                  "example": "photo1099511630536.jpg"
                },
                "locationIP": {
                  "type": "string",
                  "example": "1.29.220.142"
                },
                "browserUsed": {
                  "type": "string",
                  "example": "Chrome"
                },
                "length": {
                  "type": "number",
                  "example": 0
                },
                "CreatorPersonId": {
                  "type": "number",
                  "example": 21990232555527
                },
                "ContainerForumId": {
                  "type": "number",
                  "example": 1099511628047
                },
                "LocationCountryId": {
                  "type": "number",
                  "example": 1
                },
                "forumTitle": {
                  "type": "string",
                  "example": "Album 1 of Jun Li"
                }
              }
            }
          }
        }
      }
    }
  }
}